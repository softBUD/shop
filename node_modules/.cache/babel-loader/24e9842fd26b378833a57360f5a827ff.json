{"ast":null,"code":"var _jsxFileName = \"C:\\\\webshop\\\\shopping\\\\src\\\\hoc\\\\auth.js\";\nimport axios from 'axios';\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { auth } from '../_actions/user_action';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function (SpecificComponent, option) {\n  var _s = $RefreshSig$();\n\n  let adminRoute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  //null => 아무나 출입이 가능한 페이지\n  //true => 로그인한 유저만 출입 가능한 페이지\n  //false => 로그인한 유저는 출입 불가능한 페이지\n  function AuthenticationCheck(props) {\n    _s();\n\n    let user = useSelector(state => state.user);\n    const dispatch = useDispatch();\n    useEffect(() => {\n      dispatch(auth()).then(response => {\n        if (!response.payload.isAuth) {\n          //로그인 하지 않은 상태\n          if (option) {\n            props.history.push('/api/user/login');\n          }\n        } else {\n          //로그인 한 상태이고 어드민 권한이 없는 상태 (inAdmin이 false)\n          if (adminRoute && !response.payload.isAdmin) {\n            props.history.push('/');\n          }\n\n          if (option === false) {\n            //로그인 한 상태에서 접속할 수 없는 페이지에 접근\n            props.history.push('/');\n          }\n        }\n      });\n    }, []);\n    return /*#__PURE__*/_jsxDEV(SpecificComponent, { ...props,\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this);\n  }\n\n  _s(AuthenticationCheck, \"5J/jBDPxOCuWDcqNaifzAwnDqoU=\", false, function () {\n    return [useSelector, useDispatch];\n  });\n\n  return AuthenticationCheck;\n}","map":{"version":3,"sources":["C:/webshop/shopping/src/hoc/auth.js"],"names":["axios","React","useEffect","useSelector","useDispatch","auth","SpecificComponent","option","adminRoute","AuthenticationCheck","props","user","state","dispatch","then","response","payload","isAuth","history","push","isAdmin"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAwC,aAAxC;AACA,SAAQC,IAAR,QAAmB,yBAAnB;;AAEA,eAAe,UAAUC,iBAAV,EAA6BC,MAA7B,EAAwD;AAAA;;AAAA,MAAnBC,UAAmB,uEAAN,IAAM;;AAGnE;AACA;AACA;AACA,WAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAAA;;AAChC,QAAIC,IAAI,GAAGR,WAAW,CAACS,KAAK,IAAIA,KAAK,CAACD,IAAhB,CAAtB;AACA,UAAME,QAAQ,GAAGT,WAAW,EAA5B;AAEAF,IAAAA,SAAS,CAAC,MAAK;AAEXW,MAAAA,QAAQ,CAACR,IAAI,EAAL,CAAR,CAAiBS,IAAjB,CAAsBC,QAAQ,IAAI;AAG9B,YAAG,CAACA,QAAQ,CAACC,OAAT,CAAiBC,MAArB,EAA6B;AACzB;AACA,cAAGV,MAAH,EAAW;AACPG,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,iBAAnB;AACH;AACJ,SALD,MAKO;AACH;AACA,cAAGX,UAAU,IAAI,CAACO,QAAQ,CAACC,OAAT,CAAiBI,OAAnC,EAA4C;AACxCV,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH;;AAAC,cAAGZ,MAAM,KAAK,KAAd,EAAqB;AACnB;AACAG,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AAEH;AACJ;AACJ,OAlBD;AAmBH,KArBQ,EAqBP,EArBO,CAAT;AAsBA,wBACI,QAAC,iBAAD,OAAuBT,KAAvB;AAA8B,MAAA,IAAI,EAAEC;AAApC;AAAA;AAAA;AAAA;AAAA,YADJ;AAIH;;AApCkE,KAM1DF,mBAN0D;AAAA,YAOpDN,WAPoD,EAQ9CC,WAR8C;AAAA;;AAuCnE,SAAOK,mBAAP;AACH","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch} from 'react-redux';\r\nimport {auth} from '../_actions/user_action'\r\n\r\nexport default function (SpecificComponent, option, adminRoute = null) {\r\n\r\n\r\n    //null => 아무나 출입이 가능한 페이지\r\n    //true => 로그인한 유저만 출입 가능한 페이지\r\n    //false => 로그인한 유저는 출입 불가능한 페이지\r\n    function AuthenticationCheck(props) {\r\n        let user = useSelector(state => state.user);\r\n        const dispatch = useDispatch();\r\n\r\n        useEffect(()=> {\r\n\r\n            dispatch(auth()).then(response => {\r\n\r\n                \r\n                if(!response.payload.isAuth) {\r\n                    //로그인 하지 않은 상태\r\n                    if(option) {\r\n                        props.history.push('/api/user/login')\r\n                    }\r\n                } else {\r\n                    //로그인 한 상태이고 어드민 권한이 없는 상태 (inAdmin이 false)\r\n                    if(adminRoute && !response.payload.isAdmin) {\r\n                        props.history.push('/')\r\n                    } if(option === false) {\r\n                        //로그인 한 상태에서 접속할 수 없는 페이지에 접근\r\n                        props.history.push('/')\r\n\r\n                    }\r\n                }\r\n            })\r\n        },[])\r\n        return(\r\n            <SpecificComponent {...props} user={user}/>\r\n        )\r\n    \r\n    }\r\n\r\n\r\n    return AuthenticationCheck\r\n}"]},"metadata":{},"sourceType":"module"}